<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>أبو عبدو لخدمات الشحن</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Tahoma,Arial;margin:0;background:#f7f9fc;color:#0a0a0a}
    .container{max-width:980px;margin:auto;padding:16px}
    .card{background:#fff;border-radius:14px;box-shadow:0 6px 18px rgba(2,24,54,.06);padding:18px;margin:14px 0}
    h2{margin-top:0}
    .form-group{margin:10px 0}
    label{display:block;font-weight:700;margin-bottom:6px}
    input,select,button{width:100%;padding:12px 14px;border:1px solid #d8dee9;border-radius:10px;font-size:16px;background:#fff}
    button{background:#0b5ab8;color:#fff;border:none;cursor:pointer}
    button.secondary{background:#e5e7eb;color:#111}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width:640px){.row{grid-template-columns:1fr}}
    ul{padding-inline-start:18px}
    small.muted{color:#6b7280}
  </style>
</head>
<body>
  <main class="container">

    <!-- الخطوة 1 -->
    <section id="step1" class="card">
      <h2>الخطوة ١ – بيانات الشحن</h2>
      <p class="muted">من السعودية إلى السودان. بعد الضغط على “التالي” ستنتقل لإضافة نوع الشحنة (لا توجد أسعار في الموقع).</p>

      <div class="form-group">
        <label for="saCity">مدينة الشحن (السعودية)</label>
        <select id="saCity" required>
          <option value="">اختر</option>
          <option>الرياض</option>
          <option>جدة</option>
          <option>مكة</option>
          <option>المدينة</option>
          <option>الدمام</option>
          <option>الخبر</option>
          <option>القصيم</option>
          <option>أبها</option>
        </select>
      </div>

      <div class="form-group">
        <label for="sdState">الولاية (السودان)</label>
        <select id="sdState" required></select>
      </div>

      <div class="form-group">
        <label for="area">اسم المنطقة (إجباري)</label>
        <input type="text" id="area" placeholder="مثال: حي السوق – جوار المستشفى" required />
      </div>

      <div class="row">
        <div class="form-group">
          <label for="senderName">اسم المرسل</label>
          <input type="text" id="senderName" placeholder="مثال: أحمد علي" required />
        </div>
        <div class="form-group">
          <label for="receiverName">اسم المستلم</label>
          <input type="text" id="receiverName" placeholder="مثال: محمد حسن" required />
        </div>
      </div>

      <div class="row">
        <div class="form-group">
          <label for="receiverPhone">رقم المستلم (السودان)</label>
          <input type="text" id="receiverPhone" placeholder="مثال: 249xxxxxxxx+" required />
        </div>
        <div class="form-group">
          <label for="phone">رقم جوال العميل (السعودية)</label>
          <input type="text" id="phone" placeholder="05xxxxxxxx" required />
        </div>
      </div>

      <div class="form-group">
        <label for="senderAddress">عنوان المرسل (اسم المنطقة + الشارع + معلم بارز)</label>
        <input type="text" id="senderAddress" placeholder="مثال: النسيم – شارع حسان – جوار مسجد الهدى" required />
      </div>

      <button id="toStep2">التالي</button>
    </section>

    <!-- الخطوة 2 -->
    <section id="step2" class="card" style="display:none">
      <h2>الخطوة ٢ – السلة</h2>

      <div class="form-group">
        <label for="item">نوع الشحنة</label>
        <select id="item" required>
          <option value="">اختر</option>

          <optgroup label="طرود عامة">
            <option>برميل مواد غذائية</option>
            <option>كرتون صغير</option>
            <option>كرتون متوسط</option>
            <option>كرتون كبير</option>
            <option>شنطة سفر صغيرة</option>
            <option>شنطة سفر كبيرة</option>
            <option>أخرى (طرد/علبة/حقيبة)</option>
          </optgroup>

          <optgroup label="أجهزة كهربائية">
            <option>ثلاجة صغيرة</option>
            <option>ثلاجة متوسطة</option>
            <option>ثلاجة كبيرة</option>
            <option>فريزر أفقي</option>
            <option>فريزر رأسي</option>
            <option>غسالة ملابس</option>
            <option>غسالة صحون</option>
            <option>مكيف شباك</option>
            <option>مكيف سبليت</option>
            <option>تلفزيون 32 بوصة</option>
            <option>تلفزيون 43 بوصة</option>
            <option>تلفزيون 55 بوصة</option>
            <option>تلفزيون 65 بوصة</option>
            <option>ميكروويف</option>
            <option>فرن كهربائي</option>
            <option>دفاية/سخان ماء</option>
            <option>مكنسة كهربائية</option>
            <option>خلاط/محضّر طعام</option>
            <option>أجهزة كهربائية أخرى</option>
          </optgroup>

          <optgroup label="أثاث ومقتنيات">
            <option>دولاب ملابس</option>
            <option>سرير</option>
            <option>مرتبة</option>
            <option>طاولة</option>
            <option>كراسي</option>
            <option>أثاث متنوع</option>
          </optgroup>

          <optgroup label="أصناف أخرى">
            <option>دراجة/سيكل</option>
            <option>قطع غيار سيارات</option>
            <option>مواد أخرى</option>
          </optgroup>
        </select>
        <small class="muted">* الوزن إلزامي دائمًا — المقاس/البوصة إلزامي فقط للأجهزة الكهربائية.</small>
      </div>

      <div class="row">
        <div class="form-group">
          <label for="weight">الوزن (كجم) <span style="color:#b91c1c">*</span></label>
          <input type="number" id="weight" placeholder="مثال: 25" required />
        </div>
        <!-- يظهر فقط للأجهزة الكهربائية -->
        <div class="form-group" id="sizeGroup" style="display:none">
          <label for="size">المقاس/البوصة <span style="color:#b91c1c">*</span></label>
          <input type="text" id="size" placeholder="مثال: 60×40×40 سم أو 55 بوصة" />
        </div>
      </div>

      <button id="addToCart">إضافة للسلة</button>

      <ul id="cartList"></ul>

      <div class="row">
        <button class="secondary" id="back1">رجوع</button>
        <button id="checkout">إرسال الطلب</button>
      </div>
    </section>

  </main>

  <footer class="container">
    <p>© أبو عبدو لخدمات الشحن</p>
  </footer>

  <script>
    // ولايات السودان
    const states = [
      "الخرطوم","الولاية الشمالية","نهر النيل","كسلا","البحر الأحمر",
      "النيل الأزرق","القضارف","سنار","الجزيرة","النيل الأبيض",
    ];
    const sdState = document.getElementById('sdState');
    sdState.innerHTML = '<option value="">اختر</option>' + states.map(s => `<option>${s}</option>`).join('');

    // عناصر عامة
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const toStep2Btn = document.getElementById('toStep2');
    const back1Btn = document.getElementById('back1');
    const checkoutBtn = document.getElementById('checkout');
    const addToCartBtn = document.getElementById('addToCart');
    const cartList = document.getElementById('cartList');

    // عناصر الشحنة
    const itemSel  = document.getElementById('item');
    const weightIn = document.getElementById('weight');
    const sizeIn   = document.getElementById('size');
    const sizeGroup= document.getElementById('sizeGroup');

    // مجموعة الأجهزة الكهربائية
    const ELECTRONICS = new Set([
      "ثلاجة صغيرة","ثلاجة متوسطة","ثلاجة كبيرة","فريزر أفقي","فريزر رأسي","غسالة ملابس","غسالة صحون",
      "مكيف شباك","مكيف سبليت","تلفزيون 32 بوصة","تلفزيون 43 بوصة","تلفزيون 55 بوصة","تلفزيون 65 بوصة",
      "ميكروويف","فرن كهربائي","دفاية/سخان ماء","مكنسة كهربائية","خلاط/محضّر طعام","أجهزة كهربائية أخرى"
    ]);

    // إظهار/إخفاء خانة المقاس حسب نوع الشحنة
    function toggleSizeField(){
      const isElec = ELECTRONICS.has(itemSel.value);
      if(isElec){
        sizeGroup.style.display = 'block';
        sizeIn.setAttribute('required','required');
      }else{
        sizeGroup.style.display = 'none';
        sizeIn.removeAttribute('required');
        sizeIn.value = '';
      }
    }
    itemSel.addEventListener('change', toggleSizeField);
    toggleSizeField(); // التهيئة

    // تنقل بين الخطوات
    toStep2Btn.addEventListener('click', ()=>{
      step1.style.display = 'none';
      step2.style.display = 'block';
    });
    back1Btn.addEventListener('click', ()=>{
      step2.style.display = 'none';
      step1.style.display = 'block';
    });

    // السلة
    let cart = [];
    function renderCart(){ cartList.innerHTML = cart.map((c,i)=> `<li>${i+1}) ${c}</li>`).join(''); }

    addToCartBtn.addEventListener('click', ()=>{
      const item   = (itemSel.value || '').trim();
      const weight = (weightIn.value || '').trim();
      const isElec = ELECTRONICS.has(item);
      const size   = (sizeIn.value || '').trim();

      if(!item){ alert("الرجاء اختيار نوع الشحنة."); return; }
      if(!weight){ alert("الرجاء إدخال الوزن (كجم)."); return; }
      if(isElec && !size){ alert("الرجاء إدخال المقاس/البوصة للجهاز الكهربائي."); return; }

      const sizeText = isElec && size ? ` – المقاس/البوصة: ${size}` : '';
      const line = `${item} – الوزن: ${weight} كجم${sizeText}`;
      cart.push(line);
      renderCart();

      itemSel.value = ''; weightIn.value = ''; sizeIn.value = '';
      toggleSizeField();
    });

    // إرسال عبر واتساب
    checkoutBtn.addEventListener('click', ()=>{
      const city           = document.getElementById('saCity').value;
      const state          = document.getElementById('sdState').value;
      const area           = document.getElementById('area').value;
      const senderName     = document.getElementById('senderName').value;
      const receiverName   = document.getElementById('receiverName').value;
      const receiverPhone  = document.getElementById('receiverPhone').value;
      const phone          = document.getElementById('phone').value;
      const senderAddress  = document.getElementById('senderAddress').value;

      if(!city || !state || !area || !senderName || !receiverName || !receiverPhone || !phone || !senderAddress){
        alert("يرجى تعبئة جميع الحقول المطلوبة في الخطوة ١.");
        step1.scrollIntoView({behavior:'smooth'});
        step2.style.display = 'none';
        step1.style.display = 'block';
        return;
      }
      if(cart.length===0){ alert("يرجى إضافة شحنة واحدة على الأقل إلى السلة."); return; }

      const orderId = 'ABD-' + Math.random().toString(36).slice(2,6).toUpperCase();
      const cartLines = cart.map((c,i)=> `${i+1}) ${c}`).join('\n');

      const msg = `📦 طلب شحن جديد (${orderId})
مدينة الشحن: ${city}
ولاية الاستلام: ${state}
منطقة الاستلام: ${area}

👤 بيانات المرسل:
الاسم: ${senderName}
العنوان: ${senderAddress}
رقم الجوال (السعودية): ${phone}

👤 بيانات المستلم:
الاسم: ${receiverName}
رقم الجوال (السودان): ${receiverPhone}

🛒 السلة:
${cartLines}
(الدفع عند الاستلام)`;

      const whatsappNumber = "966542354559"; // ضع رقمك هنا (بدون +)
      const url = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(msg)}`;
      window.location.href = url;
    });
  </script>
</body>
</html>
